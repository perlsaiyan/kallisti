#nop -- comms logging

#class {comms} {kill}
#class {comms} {open}

#var chat[rows] 10;


#alias {update_chat} {
        diaLog comms update_chat for %0;
        #if {&chat[log][] >= $chat[rows]} {
                #list chat[log] del 1
        };
        #list chat[log] ins -1 {%0};

        draw_comms
}


#nop -- ---------------------------------------------------------------
#nop -- Group communications
#nop -- ---------------------------------------------------------------
#action {^You grouptell: {.*}} {
    event_raise {commsGroup} {$name} {%1} {%0};
} {8}
#action {^**%w: '%2'$} {
   event_raise {commsGroup} {%1} {%2} {%0};
} {8}

#action {^<Clan: %w> '{.*}'} {
    event_raise {commsClan} {%1} {%2} {%0};
} {8}
#action {^You cchat, '{.*}'} {
    event_raise {commsClan} {$name} {%1} {%0};
} {9}

#action {^<Gossip: %w> '{.*}'$} {
    event_raise {commsGos} {%1} {%2} {%0};
} {8}
#action {^<Gossip: %w ({.*})> '{.*}'$} {
    event_raise {commsGos} {%1 (%2)} {%3} {%0};
} {8}


#action {^%w ({.*}) tells you, '{.*}'$} {
    event_raise {commsTell} {%1 (%2)} {%3} {%0};
} {8}
#action {^You tell {.*}, '{.*}'$} {
    event_raise {commsTell} {me (to %1)} {%2} {%0};
} {8}

#action {^The winds whisper, '{.*}'} {
    event_raise {commsWorld} {%1} {%0};
} {9}


#nop -- ---------------------------------------------------------------
#nop -- Events
#nop -- ---------------------------------------------------------------
event_register {commsGroup} {chatwindow} {update_chat <f25d5f9>%4};
event_register {commsClan}  {chatwindow} {update_chat <f2ff925>%4};
event_register {commsGos}   {chatwindow} {update_chat <fce25f9>%4};
event_register {commsTell}  {chatwindow} {update_chat <ff98825>%4};
event_register {commsWorld} {chatwindow} {update_chat <fe5e4e3>%3};

#class {comms} {close}

#nop -- vim: syntax=tt
